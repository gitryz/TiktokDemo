# 开发总结

## 问题 1：瀑布流图片高度不均导致布局跳动
使用固定高度加载网络图片，图片异步加载完成后高度变化，引发瀑布流重新布局，造成卡顿与跳动。

### 优化思路
- 先通过服务器端的图片meta 信息获取图片宽高，按这个来初始化布局高度。
- 设定布局最大最小高度，通过一些动画效果降低图片尺寸突变的不良体验。
- 尽量使瀑布流的高度和大多数图片一致，不改动布局，而是通过裁切图片的方式来避免布局变动。

---

## 问题 2：弱网或快速滚动时图片加载慢，出现空白占位
网络较差时加载耗时明显；快速滑动出现大量空白区域，体验不佳。

### 优化思路
- 不向服务器请求完整分辨率的图片，而是先请求低分辨率缩略图，提升刷新和加载时的体验。这部分需要服务器端提供多分辨率图片的支持。
- 引入RecyclerViewPreloader，提前加载下一屏的图片内容。
- 减少每一页的feeditem数量，降低带宽要求。

---

## 问题 3：本地与网络多数据源整合困难
早期实现编写两个 Adapter ，在 ViewHolder 中大量 if/else，增加维护成本。

### 优化思路
- 需要抽象数据来源差异，通过设计一个RepositoryFactory类，区分来自local cache、network、mock等的多种数据源。
- 引入责任分离原则，ImageLoader封装加载与尺寸获取策略，ViewHolder 只管渲染。


